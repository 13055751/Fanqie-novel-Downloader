# 📖 番茄小说下载器使用说明

## 🚀 快速上手

### 1. 启动程序
- 双击运行 `TomatoNovelDownloader.exe`
- 或者运行 `python GUI.py`（需要Python环境）

### 2. 搜索小说
1. 在搜索框输入小说名称或关键词
2. 点击"搜索"按钮或按回车键
3. 等待搜索结果加载

### 3. 选择小说
- **方法一**：双击搜索结果中的小说行
- **方法二**：单击选择后点击"开始下载"
- **方法三**：手动输入书籍ID后点击"开始下载"

### 4. 等待下载
- 程序会显示详细的下载进度
- 自动验证章节完整性
- 自动补充缺失章节
- 自动修复章节顺序

## 📊 界面说明

### 搜索区域
- **搜索框**：输入小说名称或关键词
- **搜索按钮**：开始搜索
- **快捷键**：Ctrl+F 聚焦搜索框，回车键搜索

### 结果区域
- **ID列**：书籍的唯一标识符
- **书名列**：小说的完整标题
- **作者列**：作者姓名
- **操作**：双击行可直接开始下载

### 下载区域
- **书籍ID输入框**：可手动输入或自动填充
- **开始下载按钮**：启动下载任务
- **进度条**：显示下载进度
- **状态信息**：显示当前操作状态

### 日志区域
- **详细日志**：显示所有操作的详细信息
- **颜色标识**：
  - 🔍 蓝色：信息
  - ✅ 绿色：成功
  - ⚠️ 黄色：警告
  - ❌ 红色：错误

## 🔧 高级功能

### 章节完整性验证
程序会自动：
1. 保存原始章节目录
2. 验证下载的章节完整性
3. 发现缺失章节时自动补充下载
4. 按照原始顺序重新排列章节

### 批量修复工具
如果需要修复已下载的文件：

```bash
# 修复单个文件
python fix_chapter_order.py 小说文件.txt

# 修复当前目录所有txt文件
python fix_chapter_order.py --auto

# 修复指定目录
python fix_chapter_order.py ./downloads/
```

### 自动更新
- 程序启动时会自动检查更新
- 发现新版本时会提示用户
- 支持一键更新到最新版本

## ⚠️ 注意事项

### 下载限制
- API限制：每批次最多30章
- 建议间隔：避免过于频繁的请求
- 网络要求：需要稳定的网络连接

### 文件保存
- **保存位置**：程序运行目录
- **文件格式**：UTF-8编码的txt文件
- **文件名**：自动清理特殊字符
- **备份机制**：修复前自动创建.bak备份

### 常见问题

**Q: 下载速度很慢怎么办？**
A: 这是正常现象，程序会遵循API限制确保稳定性。

**Q: 章节顺序错乱怎么办？**
A: 程序会自动修复，也可以手动运行修复工具。

**Q: 下载中断了怎么办？**
A: 重新启动下载，程序会自动验证并补充缺失章节。

**Q: 无法搜索到小说怎么办？**
A: 尝试使用不同的关键词，或检查网络连接。

**Q: 程序崩溃了怎么办？**
A: 查看错误日志，重启程序，如果问题持续请提交Issue。

## 🛠️ 故障排除

### 网络问题
```
错误：连接超时
解决：检查网络连接，稍后重试
```

### API问题
```
错误：API响应异常
解决：等待一段时间后重试，避免频繁请求
```

### 文件问题
```
错误：文件保存失败
解决：检查磁盘空间和文件权限
```

### 编码问题
```
错误：字符编码错误
解决：确保系统支持UTF-8编码
```

## 📞 获取帮助

- **GitHub Issues**：[提交问题](https://github.com/POf-L/Fanqie-novel-Downloader/issues)
- **功能建议**：[提交建议](https://github.com/POf-L/Fanqie-novel-Downloader/issues)
- **使用文档**：[查看Wiki](https://github.com/POf-L/Fanqie-novel-Downloader/wiki)

## 🎯 使用技巧

1. **批量下载**：可以连续选择多本小说下载
2. **关键词搜索**：使用精确的关键词提高搜索准确性
3. **定期更新**：保持程序为最新版本以获得最佳体验
4. **备份重要文件**：程序会自动备份，但建议手动备份重要小说
5. **合理使用**：避免过度频繁的下载请求

---

**祝你使用愉快！如有问题欢迎反馈。** 📚✨
